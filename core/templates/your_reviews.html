{% extends 'base.html' %}

{% block title %}
    Your Reviews
{% endblock %}

{% block body %}
<div class="container-fluid bg-primary p-4" style="background: linear-gradient(rgba(232, 50, 131, 0.75), rgba(232, 50, 131, 0.75)), url('/static/popcorn.jpg') center/cover no-repeat;">
  <div class="container">
    <a class="btn btn-link px-0 py-2" href="{{ url_for('web.home') }}">
      <i class="bi bi-arrow-left me-1"></i> Back to Popular Movies
    </a>
    <h1 class="mb-3">Movies You've Reviewed</h1>
  </div>
</div>

<div class="container my-4">    
  {% if movies %}
    <div class="row g-2">
      {% for movie in movies %}
        <div class="col-sm-6 col-md-4 col-lg-3 mb-3">
          <a href="{{ url_for('web.movie_details', movie_id=movie.id) }}" class="text-decoration-none">
          <div class="card">
            {% if movie.poster_path %}
              <img src="https://image.tmdb.org/t/p/w200{{ movie.poster_path }}" alt="{{ movie.title }} poster" class="card-img-top">
            {% endif %}
              <div class="card-body p-2">
                <h5 class="card-title mb-0">{{ movie.title }}</h5>
                <p class="mb-1">{{ movie.release_date }}</p>
                <div class="d-flex">
                {% set rating = (movie.vote_average / 2) %}
                {% for i in range(1, 6) %}
                  {% if rating >= i %}
                    <i class="bi bi-star-fill text-warning"></i>
                  {% elif rating >= i - 0.5 %}
                    <i class="bi bi-star-half text-warning"></i>
                  {% else %}
                    <i class="bi bi-star text-warning"></i>
                  {% endif %}
                {% endfor %}
                <p class="text-light ms-1">({{ "%.1f"|format(rating) }})</p>
              </div>
              </div>
            </div>
          </a>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="alert alert-warning">You haven't reviewed any movies yet.</div>
  {% endif %}
</div>
{% endblock %}